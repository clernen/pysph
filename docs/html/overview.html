

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>An Overview of PySPH &mdash; PySPH v0.9 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PySPH v0.9 documentation" href="index.html" />
    <link rel="next" title="Getting started" href="getting_started.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="getting_started.html" title="Getting started"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PySPH v0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="an-overview-of-pysph">
<h1>An Overview of PySPH<a class="headerlink" href="#an-overview-of-pysph" title="Permalink to this headline">¶</a></h1>
<p>PySPH is a framework for Smoothed Particle Hydrodynamics (<tt class="xref doc docutils literal"><span class="pre">sph</span></tt>)
in <a class="reference external" href="http://www.python.org">Python</a>. The framework allows us to define arbitrary collections
of particles and forces acting on them. The corresponding initial value problem is then integrated
in time to obtain the desired solution. The best way to understand this is to consider an example.</p>
<div class="section" id="n-body-simulation-using-pysph">
<h2>N-Body simulation using PySPH<a class="headerlink" href="#n-body-simulation-using-pysph" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Consider a system of points which is governed by the following equations:</dt>
<dd><div class="first last math">
<p><span class="math">\frac{D\vec{v_i}}{Dt} = \sum_{j=1}^{N} \frac{m_j}{|x_j - x_i|^3} (\vec{x_j} - \vec{x_i})\,\, \forall i \neq j

\frac{Dx_i}{Dt} = \vec{v_i}</span></p>
</div></dd>
</dl>
<p>Thus, given the initial positions and velocities of the particles, we can numerically integrate the system to some
final time. Let&#8217;s see how to do this in PySPH!</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pysph.base.api</span> <span class="kn">as</span> <span class="nn">base</span>
<span class="kn">import</span> <span class="nn">pysph.solver.api</span> <span class="kn">as</span> <span class="nn">solver</span>
<span class="kn">import</span> <span class="nn">pysph.sph.api</span> <span class="kn">as</span> <span class="nn">sph</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="n">Fluid</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">ParticleType</span><span class="o">.</span><span class="n">Fluid</span>

<span class="c"># Generate random points in the cube [-1, 1] X [-1, 1] X [-1,1]</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">ramdom</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="mf">1.0</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">ramdom</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="mf">1.0</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="mf">1.0</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<span class="n">pa</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">get_particle_array</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">Fluid</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">)</span>
<span class="n">particles</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Particles</span><span class="p">(</span><span class="n">arrays</span><span class="o">=</span><span class="p">[</span><span class="n">pa</span><span class="p">,])</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">Solver</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                  <span class="n">integrator_type</span><span class="o">=</span><span class="n">solver</span><span class="o">.</span><span class="n">PredictorCorrectorIntegrator</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">add_operation</span><span class="p">(</span><span class="n">solver</span><span class="o">.</span><span class="n">SPHIntegration</span><span class="p">(</span>

                <span class="n">sph</span><span class="o">.</span><span class="n">NBodyForce</span><span class="o">.</span><span class="n">withargs</span><span class="p">(),</span>
                <span class="n">on_types</span><span class="o">=</span><span class="p">[</span><span class="n">Fluid</span><span class="p">],</span> <span class="n">from_types</span><span class="o">=</span><span class="p">[</span><span class="n">Fluid</span><span class="p">],</span>
                <span class="n">updates</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;u&#39;</span><span class="p">,</span><span class="s">&#39;v&#39;</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">],</span> <span class="nb">id</span><span class="o">=</span><span class="s">&#39;nbody_force&#39;</span><span class="p">)</span>

                <span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">to_step</span><span class="p">([</span><span class="n">Fluid</span><span class="p">,])</span>
<span class="n">s</span><span class="o">.</span><span class="n">set_final_time</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">set_time_step</span><span class="p">(</span><span class="mf">1e-4</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">setup_integrator</span><span class="p">(</span><span class="n">particles</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>This example demonstrates the basic steps used to solve a particular problem with PySPH:</p>
<ul class="simple">
<li>Create the particles with desired properties.</li>
<li>Construct a solver using an appropriate integrator.</li>
<li>Add forces to the system indicating the sources (from_types) and targets (on_types)</li>
<li>Run the solver.</li>
</ul>
<p>A collection of particles of a particular type is represented by a <strong>ParticleArray</strong>.:</p>
<div class="highlight-python"><pre>pa = base.get_particle_array(name="test", type=Fluid, x=x ...)</pre>
</div>
<p>Here we request an array of fluids with properties given by numpy arrays. See <a class="reference internal" href="particle_array.html"><em>Particle Array</em></a> for
more information on the use of <strong>ParticleArrays</strong>.</p>
<p>A collection of arrays is represented by <strong>Particles</strong> as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">particles</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Particles</span><span class="p">(</span><span class="n">arrays</span><span class="o">=</span><span class="p">[</span><span class="n">pa1</span><span class="p">,</span><span class="n">pa2</span><span class="p">,</span><span class="o">...</span><span class="p">])</span>
</pre></div>
</div>
<p>We can construct an arbitrary number of arrays and pass it as a list to the <strong>Particles</strong>&#8216;s constructor.
Among other things, this class constructs the internal indexing scheme which is used for fast neighbor
queries (see <a class="reference internal" href="nnps.html"><em>Nearest Neighbor Particle Searching</em></a>).</p>
<p>We then construct a solver with a kernel and state that we must use a predictor corrector scheme
for integration of the system:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">Solver</span><span class="p">(</span><span class="n">kernel</span><span class="o">=</span><span class="n">kernel</span><span class="p">,</span> <span class="n">integrator_type</span><span class="o">=</span><span class="n">solver</span><span class="o">.</span><span class="n">PredictorCorrectorIntegrator</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we need to tell PySPH how do the particles interact with each other. This is done via the following
paradigm. We add an operation to the solver. The operation acts on certain types of particles, using
other types of particles for the origin of the interaction. The operation is meant to update certain
variables on the target particles:</p>
<div class="highlight-python"><pre>s.add_operation(solver.SPHIntegration

                sph.NBodyForce.withargs(),
                on_types=[Fluid], from_types=[Fluid],
                updates=['u','v','w'], id='nbody_force'

                )</pre>
</div>
<p>In this example, the operation is of type <strong>SPHIntegration</strong> which uses the <strong>NBodyForce</strong> function to
compute forces on all fluids from all fluids. Heuristically, an operation would be required for each
equation in the problem considered.</p>
<p>The final operation is therefore the position stepping operation which may have been declared as:</p>
<div class="highlight-python"><pre>s.add_operation(solver.SPHIntegration

                sph.PositionStepping.withargs(),
                on_types=[Fluid], updates=['x','y','z'],
                id='step'

                )</pre>
</div>
<p>We achieve this by using the statement:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="n">types</span><span class="o">=</span><span class="p">[</span><span class="n">Fluid</span><span class="p">])</span>
</pre></div>
</div>
<p>Once the operations are defined, we tell the solver to setup the integrator, setup time stepping information
and solve the system. Look at the examples for more information on using PySPH to solve your problems!</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">An Overview of PySPH</a><ul>
<li><a class="reference internal" href="#n-body-simulation-using-pysph">N-Body simulation using PySPH</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="getting_started.html"
                        title="next chapter">Getting started</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="getting_started.html" title="Getting started"
             >next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             >previous</a> |</li>
        <li><a href="index.html">PySPH v0.9 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Chandrashekhar P. Kaushik and Prabhu Ramachandran.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>